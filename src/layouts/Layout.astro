---
export interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="YAS - Ø´Ø±ÙƒØ© Ø³Ø¹ÙˆØ¯ÙŠØ© Ù…ØªØ®ØµØµØ© ÙÙŠ ØªÙ‚Ø¯ÙŠÙ… Ø­Ù„ÙˆÙ„ ØªÙ‚Ù†ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©. Ù†Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø§Øª ØªØ·ÙˆÙŠØ± Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§ØªØŒ ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ØŒ ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø¨Ø£Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¬ÙˆØ¯Ø©."
    />
    <meta
      name="keywords"
      content="Ø­Ù„ÙˆÙ„ ØªÙ‚Ù†ÙŠØ©, ØªØ·ÙˆÙŠØ± Ø¨Ø±Ù…Ø¬ÙŠØ§Øª, ØªØµÙ…ÙŠÙ… Ù…ÙˆØ§Ù‚Ø¹, ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…ÙˆØ¨Ø§ÙŠÙ„, Ø´Ø±ÙƒØ© ØªÙ‚Ù†ÙŠØ© Ø³Ø¹ÙˆØ¯ÙŠØ©"
    />
    <meta name="author" content="YAS" />

    <!-- Open Graph Tags -->
    <meta property="og:title" content="YAS - Ø­Ù„ÙˆÙ„ ØªÙ‚Ù†ÙŠØ© Ø³Ø¹ÙˆØ¯ÙŠØ©" />
    <meta
      property="og:description"
      content="Ø´Ø±ÙƒØ© Ø³Ø¹ÙˆØ¯ÙŠØ© Ù…ØªØ®ØµØµØ© ÙÙŠ ØªÙ‚Ø¯ÙŠÙ… Ø­Ù„ÙˆÙ„ ØªÙ‚Ù†ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©. Ù†Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø§Øª ØªØ·ÙˆÙŠØ± Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§ØªØŒ ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ØŒ ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø¨Ø£Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¬ÙˆØ¯Ø©."
    />
    <meta property="og:image" content="assets/yass logo-05.png" />
    <meta property="og:url" content="https://yas.com" />
    <meta property="og:type" content="website" />

    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="YAS - Ø­Ù„ÙˆÙ„ ØªÙ‚Ù†ÙŠØ© Ø³Ø¹ÙˆØ¯ÙŠØ©" />
    <meta
      name="twitter:description"
      content="Ø´Ø±ÙƒØ© Ø³Ø¹ÙˆØ¯ÙŠØ© Ù…ØªØ®ØµØµØ© ÙÙŠ ØªÙ‚Ø¯ÙŠÙ… Ø­Ù„ÙˆÙ„ ØªÙ‚Ù†ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©"
    />
    <meta name="twitter:image" content="assets/yass logo-05.png" />

    <!-- Preload Critical Resources -->
    <link rel="preload" href="assets/yass logo-05.png" as="image" />

    <!-- Google Fonts - Direct Load -->
    <link rel="preconnect" href="//fonts.googleapis.com">
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
    <link
      rel="stylesheet"
      href="//fonts.googleapis.com/css2?family=IBM%20Plex%20Sans%20Arabic:wght@300;400;500;600;700&display=swap"
    />

    <!-- Remix Icon with Preload -->
    <link
      rel="preload"
      href="//cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css"
      as="style"
    />
    <link
      href="//cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css"
      rel="stylesheet"
    />
    <script is:inline src="//cdn.jsdelivr.net/npm/@reimujs/aos/dist/aos.umd.js"></script>
    <!-- Tailwind CSS -->
    <script is:inline src="//cdn.tailwindcss.com/3.4.16"></script>
     <link
     rel="stylesheet"
     href="https://cdn.jsdelivr.net/npm/@reimujs/aos/dist/aos.css"
    />
    <!-- Floating UI -->
    <script is:inline src="//cdn.jsdelivr.net/npm/@floating-ui/dom@1.5.3/dist/floating-ui.dom.umd.min.js"></script>
    
    <!-- Alpine.js -->
    <script is:inline defer src="//cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <script is:inline>
      // @ts-ignore
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'sans': ['IBM Plex Sans Arabic', 'system-ui', 'sans-serif'],
              'arabic': ['IBM Plex Sans Arabic', 'system-ui', 'sans-serif'],
            },
            colors: {
              background: "#000033",
              primary: "#91C8E4",
              secondary: "#007FFF",
              accent: "#194CE5",
              // Optionally, adjust gray for better contrast
              gray: {
                50: "#f8fafc",
                100: "#f1f5f9",
                200: "#e2e8f0",
                300: "#cbd5e1",
                400: "#94a3b8",
                500: "#64748b",
                600: "#475569",
                700: "#334155",
                800: "#1e293b",
                900: "#0f172a",
              },
            },
            borderRadius: {
              none: "0px",
              sm: "4px",
              DEFAULT: "8px",
              md: "12px",
              lg: "16px",
              xl: "20px",
              "2xl": "24px",
              "3xl": "32px",
              full: "9999px",
              button: "8px",
            },
          },
        },
      };
    </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JNK28LJLWC"></script>
    <script is:inline>
      // @ts-ignore
      window.dataLayer = window.dataLayer || [];
      // @ts-ignore
      function gtag(){dataLayer.push(arguments);}
      // @ts-ignore
      gtag('js', new Date());
      // @ts-ignore
      gtag('config', 'G-JNK28LJLWC');
    </script>
  </head>
  <body>
    <slot />

    <!-- Alpine.js Data Components -->
<script is:inline>
  // Alpine.js Data Components
  // @ts-ignore
  window.navbarData = function() {
    return {
      mobileMenuOpen: false,
      pastHero: false,
      
      init() {
        this.updateNavbar();
        // Auto close mobile menu on window resize
        window.addEventListener('resize', () => {
          if (window.innerWidth >= 768) {
            this.mobileMenuOpen = false;
          }
        });
      },
      
      toggleMobileMenu() {
        this.mobileMenuOpen = !this.mobileMenuOpen;
      },
      
      closeMobileMenu() {
        this.mobileMenuOpen = false;
      },
      
      updateNavbar() {
        const heroSection = document.querySelector("section");
        if (heroSection) {
          const heroBottom = heroSection.offsetTop + heroSection.offsetHeight;
          const scrollPosition = window.scrollY;
          this.pastHero = scrollPosition > heroBottom - 80;
        }
      },
      
      get navContainerClasses() {
        return this.pastHero 
          ? 'bg-background border-accent/20'
          : 'bg-background/90 border-primary/20';
      },
      
      get navButtonClasses() {
        return 'text-white';
      }
    }
  }
  
  // @ts-ignore
  window.aiAssistantData = function() {
    return {
      chatOpen: false,
      userInput: '',
      messages: [],
      messageId: 0,
      
      knowledgeBase: {
        'Ù…Ø§ Ù‡ÙŠ Ø®Ø¯Ù…Ø§ØªÙƒÙ…ØŸ': 'Ù†Ù‚Ø¯Ù… Ù…Ø¬Ù…ÙˆØ¹Ø© Ø´Ø§Ù…Ù„Ø© Ù…Ù† Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ØªØ´Ù…Ù„: ØªØ·ÙˆÙŠØ± ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ØŒ ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©ØŒ Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©ØŒ Ø­Ù„ÙˆÙ„ Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù†Ø¸Ù…Ø©ØŒ ØªØµÙ…ÙŠÙ… ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (UI/UX)ØŒ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ ÙˆØ§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©.',
        'Ø®Ø¯Ù…Ø§Øª': 'ØªØ´Ù…Ù„ Ø®Ø¯Ù…Ø§Øª YAS: ØªØµÙ…ÙŠÙ… ÙˆØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ØŒ Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ØŒ ØªØ·ÙˆÙŠØ± Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©ØŒ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù€ API ÙˆØ§Ù„ØªÙƒØ§Ù…Ù„ØŒ ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ ÙˆØ®Ø¯Ù…Ø§Øª Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ Ù…Ø«Ù„ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©.',
        'Ù‡Ù„ ØªØ·ÙˆØ±ÙˆÙ† ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¬ÙˆØ§Ù„ØŸ': 'Ù†Ø¹Ù…ØŒ Ù†Ù‚ÙˆÙ… Ø¨ØªØ·ÙˆÙŠØ± ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…Ø®ØµØµØ© ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø£Ù†Ø¸Ù…Ø© iOS ÙˆAndroid Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙ‚Ù†ÙŠØ§Øª Ø­Ø¯ÙŠØ«Ø© Ù…Ø«Ù„ Flutter ÙˆReact Native ÙˆSwift. Ù†Ø­Ù† Ù†Ù‡ØªÙ… Ø¨Ø¬ÙˆØ¯Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….',
        'ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙƒÙ…ØŸ': 'ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø±:<br>ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: info@yastech.com.sa<br>ğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: +966 50 195 0787<br>ğŸŒ Ø£Ùˆ Ø¹Ø¨Ø± Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ø§Ù„Ø±Ø³Ù…ÙŠ ÙˆØ³Ù†Ø±Ø¯ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©.',
        'ØªÙˆØ§ØµÙ„': 'Ø±Ø§Ø³Ù„Ù†Ø§ Ø¹Ù„Ù‰ info@yastech.com.sa Ø£Ùˆ Ø§ØªØµÙ„ Ø¹Ù„Ù‰ +966 50 195 0787ØŒ Ø£Ùˆ Ø¹Ø¨Ø± Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ù†Ø§.',
        'Ù…Ù† Ù‡ÙŠ YASØŸ': 'YAS Ù‡ÙŠ Ø´Ø±ÙƒØ© ØªÙ‚Ù†ÙŠØ© Ø³Ø¹ÙˆØ¯ÙŠØ© Ù…ØªØ®ØµØµØ© ÙÙŠ ØªØ·ÙˆÙŠØ± Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„Ù…Ø¨ØªÙƒØ±Ø© Ù„Ù„Ø´Ø±ÙƒØ§Øª ÙˆØ§Ù„Ø¬Ù‡Ø§Øª Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠØ© ÙˆØ§Ù„Ù†Ø§Ø´Ø¦Ø©. Ù†Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ¯Ø©ØŒ Ø§Ù„Ø³Ø±Ø¹Ø©ØŒ ÙˆØ§Ù„Ù…Ø±ÙˆÙ†Ø©.',
        'Ù…Ø§ Ù‡ÙŠ ØªÙƒÙ„ÙØ© Ø§Ù„Ø®Ø¯Ù…Ø§ØªØŸ': 'Ø§Ù„ØªÙƒÙ„ÙØ© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹. Ù†ÙˆÙØ± Ø¹Ø±ÙˆØ¶ Ø£Ø³Ø¹Ø§Ø± Ø´ÙØ§ÙØ© Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¯Ø©ØŒ Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©ØŒ ÙˆØ­Ø¬Ù… Ø§Ù„Ø¹Ù…Ù„. ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ø±Ø¶ Ù…ÙØµÙ„.',
        'Ù…Ø§ Ù‡ÙŠ Ù…Ø¯Ø© ØªÙ†ÙÙŠØ° Ù…Ø´Ø±ÙˆØ¹ ØªØ·ÙˆÙŠØ± Ù…ÙˆÙ‚Ø¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØŸ': 'Ù…Ø¯Ø© ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù…Ø¯Ù‰ ØªØ¹Ù‚ÙŠØ¯Ù‡. Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØµØºÙŠØ±Ø© ØªØ³ØªØºØ±Ù‚ 2-4 Ø£Ø³Ø§Ø¨ÙŠØ¹ØŒ Ø§Ù„Ù…ØªÙˆØ³Ø·Ø© 6-8 Ø£Ø³Ø§Ø¨ÙŠØ¹ØŒ ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ÙƒØ¨Ø±Ù‰ ØªØµÙ„ Ø¥Ù„Ù‰ 12 Ø£Ø³Ø¨ÙˆØ¹ Ø£Ùˆ Ø£ÙƒØ«Ø±.'
      },
      
      init() {
        this.addMessage('Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø¤Ø§Ù„ÙŠ Ø¹Ù† Ø®Ø¯Ù…Ø§ØªÙ†Ø§ØŒ Ù…Ø¯Ø© Ø§Ù„ØªÙ†ÙÙŠØ°ØŒ Ø§Ù„ØªÙƒÙ„ÙØ©ØŒ Ø£Ùˆ Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø± Ø¢Ø®Ø±.', false);
      },
      
      toggleChat() {
        this.chatOpen = !this.chatOpen;
      },
      
      closeChat() {
        this.chatOpen = false;
      },
      
      addMessage(text, isUser) {
        this.messages.push({
          id: this.messageId++,
          text: text,
          isUser: isUser,
          timestamp: new Date()
        });
        
        // @ts-ignore
        this.$nextTick(() => {
          // @ts-ignore
          if (this.$refs.chatMessages) {
            // @ts-ignore
            this.$refs.chatMessages.scrollTop = this.$refs.chatMessages.scrollHeight;
          }
        });
      },
      
      sendMessage() {
        if (!this.userInput.trim()) return;
        
        const question = this.userInput.trim();
        this.addMessage(question, true);
        
        // Process the question
        const answer = this.processUserInput(question);
        
        // Add bot response with delay
        setTimeout(() => {
          this.addMessage(answer, false);
        }, 500);
        
        this.userInput = '';
      },
      
      processUserInput(input) {
        const question = input.toLowerCase();
        let answer = 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… Ø£Ø¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø© Ù…Ø­Ø¯Ø¯Ø© Ù„Ø³Ø¤Ø§Ù„Ùƒ. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ø¨Ø± Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø§ØªØµØ§Ù„ Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ: <span dir="ltr">+966 50 195 0787</span> Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.';
        
        // Check for exact matches or partial matches
        for (const [key, value] of Object.entries(this.knowledgeBase)) {
          if (question.includes(key.toLowerCase()) ||
              key.toLowerCase().includes(question) ||
              this.containsKeywords(question, key)) {
            answer = value;
            break;
          }
        }
        
        return answer;
      },
      
      containsKeywords(userInput, faqQuestion) {
        const userWords = userInput.toLowerCase().split(' ');
        const faqWords = faqQuestion.toLowerCase().split(' ');
        
        let matchCount = 0;
        for (const word of userWords) {
          if (word.length > 2 && faqWords.some(faqWord => faqWord.includes(word) || word.includes(faqWord))) {
            matchCount++;
          }
        }
        return matchCount >= 2;
      }
    }
  }
  
  // @ts-ignore
  window.customDropdown = function() {
    return {
      isOpen: false,
      selectedValue: '',
      selectedText: 'Ø§Ø®ØªØ± Ø§Ù„Ø®Ø¯Ù…Ø©',
      hasError: false,
      isValid: false,
      
      options: [
        { value: 'mobile-app', text: 'ØªØ·ÙˆÙŠØ± ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„' },
        { value: 'web-development', text: 'ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„Ø£Ù†Ø¸Ù…Ø©' },
        { value: 'backend', text: 'ØªØ·ÙˆÙŠØ± Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©' },
        { value: 'integration', text: 'Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØªÙƒØ§Ù…Ù„' },
        { value: 'ui-ux', text: 'ØªØµÙ…ÙŠÙ… ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' },
        { value: 'support', text: 'Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª' },
        { value: 'other', text: 'Ø£Ø®Ø±Ù‰' }
      ],
      
      init() {
        // Initialize Floating UI when component mounts
        // @ts-ignore
        this.$nextTick(() => {
          this.setupFloating();
        });
      },
      
      setupFloating() {
        const button = this.$refs.button;
        const dropdown = this.$refs.dropdown;
        
        if (button && dropdown) {
          const { computePosition, offset, flip, shift } = FloatingUI;
          
          computePosition(button, dropdown, {
            placement: 'bottom-start',
            middleware: [
              offset(4),
              flip(),
              shift({ padding: 8 })
            ]
          }).then(({ x, y }) => {
            Object.assign(dropdown.style, {
              left: `${x}px`,
              top: `${y}px`,
            });
          });
        }
      },
      
      toggleDropdown() {
        this.isOpen = !this.isOpen;
        if (this.isOpen) {
          // @ts-ignore
          this.$nextTick(() => {
            this.setupFloating();
          });
        }
      },
      
      closeDropdown() {
        this.isOpen = false;
      },
      
      selectOption(option) {
        this.selectedValue = option.value;
        this.selectedText = option.text;
        this.closeDropdown();
        this.validateSelection();
        
        // Call form validation directly
        // @ts-ignore
        if (window.validateServiceField) {
          // @ts-ignore
          window.validateServiceField(this.selectedValue);
        }
        
        // Call global validation function if available
        // @ts-ignore
        if (window.updateSubmitButton) {
          // @ts-ignore
          window.updateSubmitButton();
        }
      },
      
      handleBlur() {
        // Small delay to allow for option selection
        setTimeout(() => {
          if (!this.isOpen) {
            this.validateSelection();
            
            // Mark as blurred for validation
            // @ts-ignore
            if (window.hasBlurred) {
              // @ts-ignore
              window.hasBlurred.service = true;
            }
            
            // Call form validation directly
            // @ts-ignore
            if (window.validateServiceField) {
              // @ts-ignore
              window.validateServiceField(this.selectedValue);
            }
            
            // Call global validation function if available
            // @ts-ignore
            if (window.updateSubmitButton) {
              // @ts-ignore
              window.updateSubmitButton();
            }
          }
        }, 150);
      },
      
      validateSelection() {
        this.hasError = !this.selectedValue;
        this.isValid = !!this.selectedValue;
        
        // Update the hidden select validation state
        const selectElement = document.getElementById('service');
        if (selectElement && this.selectedValue) {
          // @ts-ignore
          selectElement.setCustomValidity('');
        } else if (selectElement) {
          // @ts-ignore
          selectElement.setCustomValidity('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
        }
      }
    }
  }
  
  // @ts-ignore
  window.policiesDropdown = function() {
    return {
      isOpen: false,
      selectedValue: 'tab1',
      selectedText: 'Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø§Ù„ØªØ²Ø§Ù… Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ',
      
      options: [
        { value: 'tab1', text: 'Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø§Ù„ØªØ²Ø§Ù… Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ' },
        { value: 'tab2', text: 'Ø§Ù„ØªÙ†ÙÙŠØ° ÙˆØ§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ Ø§Ù„Ù…Ø³ØªÙ…Ø±' },
        { value: 'tab3', text: 'Ø´Ø±Ø§ÙƒØ© ØªØ´ØºÙŠÙ„ÙŠØ© Ù…Ø¹ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø£Ø±Ø¨Ø§Ø­' },
        { value: 'tab4', text: 'Ø´Ø±Ø§ÙƒØ© Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø¨Ù…Ù„ÙƒÙŠØ© Ù…Ø´ØªØ±ÙƒØ©' },
        { value: 'tab5', text: 'Ø§Ø³ØªØ«Ù…Ø§Ø± Ù…Ø¨Ø§Ø´Ø± Ù…Ù† YAS Ø¨Ù…Ù„ÙƒÙŠØ© Ù…Ø³ÙŠØ·Ø±Ø©' }
      ],
      
      init() {
        this.$nextTick(() => {
          this.setupFloating();
        });
      },
      
      setupFloating() {
        const button = this.$refs.button;
        const dropdown = this.$refs.dropdown;
        
        if (button && dropdown) {
          const { computePosition, offset, flip, shift } = FloatingUI;
          
          computePosition(button, dropdown, {
            placement: 'bottom-start',
            middleware: [
              offset(4),
              flip(),
              shift({ padding: 8 })
            ]
          }).then(({ x, y }) => {
            Object.assign(dropdown.style, {
              left: `${x}px`,
              top: `${y}px`,
            });
          });
        }
      },
      
      toggleDropdown() {
        this.isOpen = !this.isOpen;
        if (this.isOpen) {
          // @ts-ignore
          this.$nextTick(() => {
            this.setupFloating();
          });
        }
      },
      
      closeDropdown() {
        this.isOpen = false;
      },
      
      selectOption(option) {
        this.selectedValue = option.value;
        this.selectedText = option.text;
        this.closeDropdown();
        
        // Trigger tab change
        this.switchTab(option.value);
      },
      
      handleBlur() {
        // Small delay to allow for option selection
        setTimeout(() => {
          if (!this.isOpen) {
            // Tab switching is handled in selectOption
          }
        }, 150);
      },
      
      switchTab(tabId) {
        // Hide all tab cards
        const allTabs = document.querySelectorAll('.tab-card');
        allTabs.forEach(tab => {
          tab.classList.remove('active');
        });
        
        // Show selected tab
        const selectedTab = document.getElementById(tabId);
        if (selectedTab) {
          selectedTab.classList.add('active');
        }
      }
    }
  }

  
  // @ts-ignore
  window.whyYasData = function() {
    return {
      currentIndex: 0,
      
      cards: [
        {
          title: 'ÙÙ‡Ù… Ø§Ù„Ø³ÙˆÙ‚',
          icon: 'ri-map-pin-user-line',
          description: 'Ù†Ù…ØªÙ„Ùƒ ÙÙ‡Ù…Ø§Ù‹ Ø¹Ù…ÙŠÙ‚Ø§Ù‹ Ù„Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù…Ø­Ù„ÙŠ ÙˆØ§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†ØŒ Ù…Ù…Ø§ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ù…Ù† ØªÙ‚Ø¯ÙŠÙ… Ø­Ù„ÙˆÙ„ Ù…Ù†Ø§Ø³Ø¨Ø© ÙˆÙØ¹Ø§Ù„Ø© ØªÙ„Ø¨ÙŠ ØªÙˆÙ‚Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØªØªÙ…Ø§Ø´Ù‰ Ù…Ø¹ Ø§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„Ù…Ø­Ù„ÙŠØ©.',
          features: [
            { title: 'Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø´Ø§Ù…Ù„Ø©', description: 'ØªØ­Ù„ÙŠÙ„ Ø¹Ù…ÙŠÙ‚ Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª Ø§Ù„Ø³ÙˆÙ‚ ÙˆØ§Ù„ÙØ±Øµ', icon: 'ri-line-chart-line' },
            { title: 'ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†', description: 'Ø¯Ø±Ø§Ø³Ø© Ù…ØªØ¹Ù…Ù‚Ø© Ù„Ù„Ù…Ù†Ø§ÙØ³Ø© ÙˆØ§Ù„ØªÙ…ÙŠØ²', icon: 'ri-focus-3-line' },
          ],
        },
        {
          title: 'Ø¬ÙˆØ¯Ø© Ø§Ù„ØªÙ†ÙÙŠØ°',
          icon: 'ri-award-line',
          description: 'Ù†Ù‚Ø¯Ù… Ø¬ÙˆØ¯Ø© ØªÙ†ÙÙŠØ° Ø¹Ø§Ù„ÙŠØ© Ù…Ø¹ Ù…Ø±ÙˆÙ†Ø© ØªÙ†Ø§Ø³Ø¨ ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ ÙˆØªÙ„Ø¨ÙŠ Ù…ØªØ·Ù„Ø¨Ø§ØªÙ‡ Ø§Ù„Ø®Ø§ØµØ©ØŒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø­Ø¯Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª ÙˆØ£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©.',
          features: [
            { title: 'Ù…Ø¹Ø§ÙŠÙŠØ± Ø¹Ø§Ù„Ù…ÙŠØ©', description: 'Ù†ØªØ¨Ø¹ Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© ÙÙŠ Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø©', icon: 'ri-global-line' },
            { title: 'Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø´Ø§Ù…Ù„Ø©', description: 'Ù†Ø¬Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…ÙƒØ«ÙØ© Ù„Ø¶Ù…Ø§Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ', icon: 'ri-test-tube-line' },
          ],
        },
        {
          title: 'Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…',
          icon: 'ri-time-line',
          description: 'Ù†Ù„ØªØ²Ù… Ø¨Ø§Ù„ÙˆÙ‚Øª Ø¯ÙˆÙ† Ø§Ù„ØªÙØ±ÙŠØ· ÙÙŠ Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¹Ù…Ù„ØŒ Ù…Ø¹ Ø¶Ù…Ø§Ù† ØªØ³Ù„ÙŠÙ… Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙÙŠ Ù…ÙˆØ¹Ø¯Ù‡Ø§ Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙˆØ§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø£Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¬ÙˆØ¯Ø©.',
          features: [
            { title: 'Ø§Ù„ØªØ²Ø§Ù…Ù†Ø§ Ø¨Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯', description: 'Ù†Ø­Ø±Øµ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ø¯ÙˆÙ† Ø§Ù„ØªÙØ±ÙŠØ· ÙÙŠ Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¹Ù…Ù„', icon: 'ri-calendar-check-line' },
            { title: 'Ø´ÙØ§ÙÙŠØ© ÙˆÙ…ØªØ§Ø¨Ø¹Ø©', description: 'Ù†Ù‚Ø¯Ù… ØªÙ‚Ø§Ø±ÙŠØ± Ø¯ÙˆØ±ÙŠØ© ÙˆØ´ÙØ§ÙÙŠØ© ÙƒØ§Ù…Ù„Ø© ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø¹Ù…Ù„', icon: 'ri-eye-line' },
          ],
        },
        {
          title: 'Ø§Ù„Ø´ØºÙ',
          icon: 'ri-heart-line',
          description: 'Ù†ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ ÙˆÙƒØ£Ù†Ù‡ Ù…Ø´Ø±ÙˆØ¹Ù†Ø§ Ø§Ù„Ø®Ø§ØµØŒ ÙˆÙ†Ø¶Ø¹ ÙƒÙ„ Ø®Ø¨Ø±Ø§ØªÙ†Ø§ ÙˆØ¥Ù…ÙƒØ§Ù†ÙŠØ§ØªÙ†Ø§ Ù„Ø¥Ù†Ø¬Ø§Ø²Ù‡ Ø¨Ø£ÙØ¶Ù„ Ø´ÙƒÙ„ Ù…Ù…ÙƒÙ†.',
          features: [
            { title: 'ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ§ØµÙŠÙ„', description: 'Ù†Ù‡ØªÙ… Ø¨Ø£Ø¯Ù‚ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙÙŠ ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ Ù„Ø¶Ù…Ø§Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬', icon: 'ri-focus-3-line' },
            { title: 'Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø¬ÙˆØ¯Ø©', description: 'Ù†Ø³Ø¹Ù‰ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„ØªÙ‚Ø¯ÙŠÙ… Ø£Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø¬ÙˆØ¯Ø© ÙÙŠ ÙƒÙ„ Ù…Ø§ Ù†Ù‚ÙˆÙ… Ø¨Ù‡', icon: 'ri-shield-star-line' },
          ],
        },
        {
          title: 'Ø§Ù„Ø¯Ø¹Ù…',
          icon: 'ri-customer-service-2-line',
          description: 'Ù†ÙˆØ§ØµÙ„ Ø¯Ø¹Ù… Ø¹Ù…Ù„Ø§Ø¦Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ ÙˆÙ†Ù†Ù…Ùˆ Ù…Ø¹Ù‡Ù… Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±ØŒ ÙˆÙ†Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø§Øª Ù…ØªØ§Ø¨Ø¹Ø© ÙˆØªØ·ÙˆÙŠØ± Ù…Ø³ØªÙ…Ø±Ø©.',
          features: [
            { title: 'Ø¯Ø¹Ù… ÙÙ†ÙŠ Ù…ØªÙˆØ§ØµÙ„', description: 'Ù†Ù‚Ø¯Ù… Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©', icon: 'ri-24-hours-line' },
            { title: 'ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¯ÙˆØ±ÙŠØ©', description: 'Ù†Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ù†Ø¸Ù…Ø© ÙˆØªØ·ÙˆÙŠØ±Ù‡Ø§ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±', icon: 'ri-refresh-line' },
          ],
        },
        {
          title: 'Ø§Ù„ÙØ±ÙŠÙ‚',
          icon: 'ri-team-line',
          description: 'Ù†Ø¶Ù… Ù†Ø®Ø¨Ø© Ù…Ù† Ø§Ù„Ø®Ø¨Ø±Ø§Ø¡ Ø§Ù„Ù…ØªØ®ØµØµÙŠÙ† ÙÙŠ Ù…Ø®ØªÙ„Ù Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ù„Ø¶Ù…Ø§Ù† ØªÙ‚Ø¯ÙŠÙ… Ø­Ù„ÙˆÙ„ Ù…ØªÙƒØ§Ù…Ù„Ø© ÙˆÙ…Ø¨ØªÙƒØ±Ø©.',
          features: [
            { title: 'ØªØ®ØµØµØ§Øª Ù…ØªÙ†ÙˆØ¹Ø©', description: 'ÙØ±ÙŠÙ‚ Ø¹Ù…Ù„ ÙŠØ¶Ù… Ù…Ø·ÙˆØ±ÙŠÙ†ØŒ Ù…ØµÙ…Ù…ÙŠÙ†ØŒ ÙˆØ®Ø¨Ø±Ø§Ø¡ ÙÙŠ Ù…Ø®ØªÙ„Ù Ø§Ù„Ù…Ø¬Ø§Ù„Ø§Øª', icon: 'ri-user-settings-line' },
            { title: 'Ø®Ø¨Ø±Ø© ÙˆÙƒÙØ§Ø¡Ø©', description: 'Ø£Ø¹Ø¶Ø§Ø¡ ÙØ±ÙŠÙ‚Ù†Ø§ ÙŠÙ…ØªÙ„ÙƒÙˆÙ† Ø®Ø¨Ø±Ø© ÙˆØ§Ø³Ø¹Ø© ÙÙŠ ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ØªÙ‚Ù†ÙŠØ©', icon: 'ri-briefcase-4-line' },
          ],
        },
      ],
      
      get currentCard() {
        return this.cards[this.currentIndex];
      },

      init() {
        // No keyboard nav needed for this layout
      },
      
      goToCard(index) {
        if(index < 0) {
          this.currentIndex = this.cards.length - 1;
        } else if (index >= this.cards.length) {
          this.currentIndex = 0;
        } else {
          this.currentIndex = index;
        }
      },
      
      nextCard() {
        this.goToCard(this.currentIndex + 1);
      },
      
      prevCard() {
        this.goToCard(this.currentIndex - 1);
      },
      
      isInViewport(element) {
        if (!element) return false;
        const rect = element.getBoundingClientRect();
        return rect.top < window.innerHeight && rect.bottom > 0;
      }
    }
  }
</script>

<!-- Form Response Modal Functions using Alpine.js -->
<script is:inline>
  function showModal(title, message, type = 'success') {
    const modal = document.getElementById('form-response-modal');
    // @ts-ignore
    if (modal && modal._x_dataStack && modal._x_dataStack[0]) {
      // @ts-ignore
      modal._x_dataStack[0].show(title, message, type);
    }
  }
</script>

<!-- Form Validation Script -->
<script is:inline>
  // Contact Form Validation
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form');
    const nameField = document.getElementById('name');
    const emailField = document.getElementById('email');
    const serviceField = document.getElementById('service');
    const messageField = document.getElementById('message');
    const phoneField = document.getElementById('phone');
    const submitBtn = document.getElementById('submit-btn');
    
    // Validation rules
    const validators = {
      name: {
        required: true,
        minLength: 2,
        pattern: /^[\u0600-\u06FFa-zA-Z\s]+$/,
        messages: {
          required: 'Ø§Ù„Ø§Ø³Ù… Ù…Ø·Ù„ÙˆØ¨',
          minLength: 'Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ø­Ø±ÙÙŠÙ†',
          pattern: 'Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø­Ø±Ù ÙÙ‚Ø·'
        }
      },
      email: {
        required: true,
        pattern: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
        messages: {
          required: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø·Ù„ÙˆØ¨',
          pattern: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­'
        }
      },
      service: {
        required: true,
        messages: {
          required: 'ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©'
        }
      },
      message: {
        required: false,
        messages: {
          required: 'Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø·Ù„ÙˆØ¨Ø©'
        }
      },
      phone: {
        required: false,
        pattern: /^[\+]?[0-9\s\-\(\)]+$/,
        messages: {
          required: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨',
          pattern: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­'
        }
      }
    };
    
    // Validation state
    const validationState = {
      name: false,
      email: false,
      service: false,
      message: true,  // Optional field, always valid
      phone: true     // Optional field, always valid
    };
    
    // Validate field function
    function validateField(fieldName, value) {
      // @ts-ignore
      const rules = validators[fieldName];
      const errorDiv = document.getElementById(`${fieldName}-error`);
      const field = document.getElementById(fieldName);
      
      // Special handling for custom dropdown service field
      if (fieldName === 'service') {
        return validateServiceField(value);
      }
      
      // Clear previous styling
      if (field) {
        field.classList.remove('border-red-500', 'border-green-500');
      }
      if (errorDiv) {
        errorDiv.classList.add('hidden');
        errorDiv.textContent = '';
      }
      
      // Required validation
      if (rules.required && (!value || value.trim() === '')) {
        showError(fieldName, rules.messages.required);
        return false;
      }
      
      // Skip other validations if field is empty and not required
      if (!value || value.trim() === '') {
        // @ts-ignore
        validationState[fieldName] = true;
        if (field) {
          field.classList.add('border-green-500');
        }
        return true;
      }
      
      // MinLength validation
      if (rules.minLength && value.trim().length < rules.minLength) {
        showError(fieldName, rules.messages.minLength);
        return false;
      }
      
      // Pattern validation
      if (rules.pattern && !rules.pattern.test(value.trim())) {
        showError(fieldName, rules.messages.pattern);
        return false;
      }
      
      // Valid field
      // @ts-ignore
      validationState[fieldName] = true;
      if (field) {
        field.classList.add('border-green-500');
      }
      return true;
    }
    
    // Special validation for custom dropdown service field
    function validateServiceField(value) {
      const rules = validators.service;
      const errorDiv = document.getElementById('service-error');
      
      // Always clear previous error state first
      if (errorDiv) {
        errorDiv.classList.add('hidden');
        errorDiv.textContent = '';
      }
      
      // Required validation
      if (rules.required && (!value || value.trim() === '')) {
        validationState.service = false;
        if (errorDiv) {
          errorDiv.textContent = rules.messages.required;
          errorDiv.classList.remove('hidden');
        }
        return false;
      }
      
      // Valid field - ensure error is hidden and state is updated
      validationState.service = true;
      if (errorDiv) {
        errorDiv.classList.add('hidden');
        errorDiv.textContent = '';
      }
      return true;
    }
    
    // Show error function
    function showError(fieldName, message) {
      const errorDiv = document.getElementById(`${fieldName}-error`);
      const field = document.getElementById(fieldName);
      
      // @ts-ignore
      validationState[fieldName] = false;
      
      // Special handling for custom dropdown service field
      if (fieldName !== 'service' && field) {
        field.classList.add('border-red-500');
      }
      
      if (errorDiv) {
        errorDiv.textContent = message;
        errorDiv.classList.remove('hidden');
      }
    }
    
    // Update submit button state
    function updateSubmitButton() {
      const allValid = Object.values(validationState).every(state => state === true);
      if (submitBtn) {
        // @ts-ignore
        submitBtn.disabled = !allValid;
      }
    }
    
    // Make functions globally accessible immediately
    // @ts-ignore
    window.updateSubmitButton = updateSubmitButton;
    // @ts-ignore
    window.validateServiceField = validateServiceField;
    // @ts-ignore
    window.validationState = validationState;
    
    // Add blur event listeners
    if (nameField) {
      nameField.addEventListener('blur', function() {
        // @ts-ignore
        validateField('name', this.value);
        updateSubmitButton();
      });
    }
    
    if (emailField) {
      emailField.addEventListener('blur', function() {
        // @ts-ignore
        validateField('email', this.value);
        updateSubmitButton();
      });
    }
    
    // Service field validation is handled by Alpine.js component
    // No need for event listeners on the hidden select element
    
    // Message field is optional, no validation needed
    
    // Add input event listeners for real-time feedback after initial blur
    let hasBlurred = {
      name: false,
      email: false,
      service: false,
      message: true,  // Optional field, no validation needed
      phone: true     // Optional field, no validation needed
    };
    
    // Make hasBlurred globally accessible
    // @ts-ignore
    window.hasBlurred = hasBlurred;
    
    if (nameField) {
      nameField.addEventListener('blur', () => hasBlurred.name = true);
    }
    if (emailField) {
      emailField.addEventListener('blur', () => hasBlurred.email = true);
    }
    if (serviceField) {
      serviceField.addEventListener('blur', () => hasBlurred.service = true);
    }
    
    // Add phone field validation
    if (phoneField) {
      phoneField.addEventListener('blur', function() {
        // @ts-ignore
        if (this.value.trim()) {  // Only validate if not empty (since it's optional)
          // @ts-ignore
          validateField('phone', this.value);
          updateSubmitButton();
        }
        hasBlurred.phone = true;
      });
    }
    
    if (nameField) {
      nameField.addEventListener('input', function() {
        if (hasBlurred.name) {
          // @ts-ignore
          validateField('name', this.value);
          updateSubmitButton();
        }
      });
    }
    
    if (emailField) {
      emailField.addEventListener('input', function() {
        if (hasBlurred.email) {
          // @ts-ignore
          validateField('email', this.value);
          updateSubmitButton();
        }
      });
    }
    
    if (phoneField) {
      phoneField.addEventListener('input', function() {
        // @ts-ignore
        if (hasBlurred.phone && this.value.trim()) {  // Only validate if not empty (since it's optional)
          // @ts-ignore
          validateField('phone', this.value);
          updateSubmitButton();
        }
      });
    }
    
    // Message field is optional, no input validation needed
    
    // Form submit validation and submission
    if (form) {
      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Validate all required fields
        const nameValid = nameField ? validateField('name', nameField.value) : false;
        const emailValid = emailField ? validateField('email', emailField.value) : false;
        const serviceValid = serviceField ? validateField('service', serviceField.value) : false;
        // Message field is optional, no validation needed
        
        updateSubmitButton();
        
        if (nameValid && emailValid && serviceValid) {
          // Disable submit button and show loading state
          if (submitBtn) {
            // @ts-ignore
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="ri-loader-4-line animate-spin mr-2"></i>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';
          }
          
          try {
            // Prepare form data
            const formData = {
              name: nameField ? nameField.value.trim() : '',
              email: emailField ? emailField.value.trim() : '',
              service: serviceField ? serviceField.value : '',
              message: messageField ? messageField.value.trim() : '',
              phone: document.getElementById('phone') ? document.getElementById('phone').value.trim() : ''
            };
            
            // Send to YAS API endpoint directly
            const response = await fetch('https://yastech.io/api/request', {
              method: 'POST',
              headers: {
                'accept': '*/*',
                'accept-language': 'ar,en-US;q=0.9,en;q=0.8,ar-SA;q=0.7,eo;q=0.6',
                'content-type': 'application/json',
              },
              body: JSON.stringify(formData),
            });
            
            if (response.ok) {
              // Success - show success modal
              // @ts-ignore
              showModal(
                'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!',
                'Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ Ø¹Ù„Ù‰ ØªÙˆØ§ØµÙ„Ùƒ Ù…Ø¹Ù†Ø§. Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙƒ ÙÙŠ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª Ù…Ù…ÙƒÙ†.',
                'success'
              );
              
              // Reset form
              // @ts-ignore
              form.reset();
              
              // Reset validation state
              Object.keys(validationState).forEach(key => {
                // Reset states based on field requirements
                if (key === 'message' || key === 'phone') {
                  // @ts-ignore
                  validationState[key] = true;  // Optional fields, always valid
                  // @ts-ignore
                  hasBlurred[key] = true;
                } else {
                  // @ts-ignore
                  validationState[key] = false;
                  // @ts-ignore
                  hasBlurred[key] = false;
                }
                
                const field = document.getElementById(key);
                const errorDiv = document.getElementById(`${key}-error`);
                
                // Special handling for custom dropdown service field
                if (key !== 'service' && field) {
                  field.classList.remove('border-red-500', 'border-green-500');
                }
                
                if (errorDiv) {
                  errorDiv.classList.add('hidden');
                  errorDiv.textContent = '';
                }
              });
              
            } else {
              // Error response from server
              const errorData = await response.text();
              throw new Error(`Server error: ${response.status}`);
            }
            
          } catch (error) {
            console.error('Form submission error:', error);
            
            // Show error modal
            // @ts-ignore
            showModal(
              'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„',
              'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù…Ø¨Ø§Ø´Ø±Ø©.',
              'error'
            );
          }
          
          // Reset submit button
          if (submitBtn) {
            // @ts-ignore
            submitBtn.disabled = false;
            submitBtn.innerHTML = 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨';
          }
          updateSubmitButton();
          
        } else {
          // Scroll to first error
          const firstError = form.querySelector('.border-red-500');
          if (firstError) {
            firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
            // @ts-ignore
            firstError.focus();
          }
        }
      });
    }
    
    // Initial button state
    updateSubmitButton();
  });
</script>

<!-- Initialize AOS.js -->
<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    // @ts-ignore
    AOS.init({
      duration: 800,
      easing: 'ease-out',
      once: true,
      offset: 50,
      delay: 0
    });
  });
</script>

  </body>
</html>
